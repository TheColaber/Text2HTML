window.parseHTML=(t,{asList:e=!1,baseUrls:r=""}={})=>{let n=[];if(void 0===t)throw"Error the text to parce must be specified.";let h=this;if(function t(e,s){for(var i=0;32==s.charCodeAt(i)||10==s.charCodeAt(i);i++);if(i!=s.length)if("<"==s.charAt(i)){if("\x3c!--"==s.substring(i,i+4)){let r="";for(i+=4;"--\x3e"!=s.substring(i,i+3);i++)r+=s.charAt(i);let a=document.createComment(r);return e==h?n.unshift(a):e.appendChild(a),void t(e,s.substring(i+3,s.length))}let a=0,c="";for(i++;">"!=s.charAt(i)&&" "!=s.charAt(i)&&"/>"!=s.substring(i,i+2);i++)c+=s.charAt(i);let l=document.createElement(c);try{e==h?n.push(l):e.appendChild(l)}catch{throw`Error in creating element "${c}"`}for(a+=!l.outerHTML.includes("</");">"!=s.charAt(i);){for(;" "==s.charAt(i);)i++;if("/>"==s.substring(i,i+2)){a++;break}if(">"==s.charAt(i))break;let t="";for(;"="!=s.charAt(i)&&">"!=s.charAt(i);i++)t+=s.charAt(i);i+=">"!=s.charAt(i);let e=("'"==s.charAt(i)||'"'==s.charAt(i))&&s.charAt(i);i+="'"==e||'"'==e;let n="";for(;"'"==e||'"'==e?s.charAt(i)!=e:" "!=s.charAt(i)&&">"!=s.charAt(i);i++)n+=s.charAt(i);["href","src"].includes(t)&&n.startsWith("/")&&(n=r+n);try{l.setAttribute(t,n)}catch(e){throw`Error: Failed to set the attribute "${t}" to "${n}" on "${c}" element`}i+="'"==e||'"'==e}let g=i+a;if(a)t(l.parentElement,s.substring(g,s.length));else{g=i;let e=0;for(;g<s.length&&(s.substring(g,g+`<${c}`.length)==`<${c}`&&e++,s.substring(g,g+`</${c}>`.length)!=`</${c}>`||-1!=--e);g++);t(l,s.substring(i+1,g)),t(l.parentElement||h,s.substring(g+`</${c}>`.length,s.length))}}else{let r="";if(r=(r=s.substring(i,s.length).match(/<.*>/g)?s.substring(i,s.indexOf(s.substring(i,s.length).match(/<.*>/g)[0])):s.substring(i,s.length)).replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e)),e.childNodes.length){let t=document.createTextNode(r);e==h?n.unshift(t):e.appendChild(t)}else e.textContent=r;s.substring(i,s.length).match(/<.*>/g)&&t(e,s.substring(s.indexOf(s.substring(i,s.length).match(/<.*>/g)[0]),s.length))}}(this,t),e)return n[1]?n:n[0];let s=document.createElement("body");return s.append(...n),s};
